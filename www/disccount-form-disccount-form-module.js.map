{"version":3,"sources":["./src/app/disccounts/disccount-form/disccount-fields.ts","./src/app/disccounts/disccount-form/disccount-form.page.scss","./src/app/disccounts/disccount-form/disccount-form.module.ts","./src/app/disccounts/disccount-form/disccount-form-routing.module.ts","./src/app/disccounts/disccount-form/disccount-form.page.ts","./src/app/disccounts/disccount-form/disccount-form.page.html"],"names":[],"mappings":"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","file":"disccount-form-disccount-form-module.js","sourcesContent":["export const disccountFields = [\r\n    {\r\n      fieldName: 'percentage',\r\n      label: 'Prcentaje',\r\n      required: true,\r\n      type: 'number'\r\n    },\r\n    {\r\n      fieldName: 'start_date',\r\n      label: 'Fecha inicio',\r\n      required: true,\r\n      type: 'date'\r\n    },\r\n    { fieldName: 'end_date', label: 'Fecha final', required: true, type: 'date' }\r\n  ];\r\n  ","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJkaXNjY291bnQtZm9ybS5wYWdlLnNjc3MifQ== */\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DisccountFormPageRoutingModule } from './disccount-form-routing.module';\n\nimport { DisccountFormPage } from './disccount-form.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DisccountFormPageRoutingModule\n  ],\n  declarations: [DisccountFormPage]\n})\nexport class DisccountFormPageModule {}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DisccountFormPage } from './disccount-form.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DisccountFormPage\n  },\n  {\n    path: ':disccountId',\n    component: DisccountFormPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DisccountFormPageRoutingModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { AngularFirestore } from '@angular/fire/firestore';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Disccount } from './disccount';\nimport { disccountFields } from './disccount-fields';\n\n@Component({\n  selector: 'app-disccount-form',\n  templateUrl: './disccount-form.page.html',\n  styleUrls: ['./disccount-form.page.scss'],\n})\nexport class DisccountFormPage implements OnInit {\n  constructor(\n    private readonly ngFirestore: AngularFirestore,\n    private readonly route: ActivatedRoute,\n    private readonly router: Router\n  ) {}\n\n  disccountFields = disccountFields;\n  disccountId: string;\n  disccount: Disccount = {\n    percentage: 0,\n    start_date: new Date(),\n    end_date: new Date(),\n    status: 'Disponible',\n  };\n  missingFields;\n  tokenId: string;\n  status = {\n    Activa: {\n      icon: 'checkmark-circle',\n      color: 'green',\n    },\n    Caducada: {\n      icon: 'lock-closed',\n      color: 'red',\n    },\n  };\n\n  ngOnInit() {\n    this.disccountId = this.route.snapshot.params.disccountId;\n    if (this.disccountId) {\n      this.ngFirestore\n        .collection('disccounts')\n        .doc(this.disccountId)\n        .valueChanges()\n        .subscribe((d) => (this.disccount = d as Disccount));\n    }\n  }\n\n  save() {\n    if (!this.disccountId) {\n      this.ngFirestore.collection('disccounts').add(this.disccount);\n      this.router.navigate(['disccounts']);\n    } else {\n      this.ngFirestore\n        .collection('disccounts')\n        .doc(this.disccountId)\n        .update(this.disccount)\n        .then(() => {\n          this.router.navigate(['disccounts']);\n        })\n        .catch((error) => console.log(error));\n    }\n  }\n\n  delete() {\n    this.ngFirestore.doc('disccounts/' + this.disccountId).delete();\n    this.router.navigate(['disccounts']);\n  }\n}\n","export default \"<ion-header>\\n    <ion-toolbar class=\\\"custom-background\\\">\\n        <ion-title>{{disccountId ?'Editar ': 'Crear '}}Promoci√≥n {{disccount?.percentage ? disccount?.percentage+ '%': ''}</ion-title>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n    <ion-fab *ngIf=\\\"disccountId\\\" vertical=\\\"bottom\\\" horizontal=\\\"start\\\" slot=\\\"fixed\\\" (click)=\\\"delete()\\\">\\n        <ion-fab-button color=\\\"danger\\\">\\n            <ion-icon class=\\\"danger\\\" name=\\\"trash\\\"></ion-icon>\\n        </ion-fab-button>\\n    </ion-fab>\\n    <!-- fab placed to the bottom end-->\\n    <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\" (click)=\\\"save()\\\">\\n        <ion-fab-button color=\\\"tertiary\\\">\\n            <ion-icon class=\\\"white\\\" name=\\\"checkmark-done-outline\\\"></ion-icon>\\n        </ion-fab-button>\\n    </ion-fab>\\n    <ion-list>\\n        <ion-item *ngIf=\\\"missingFields\\\">\\n            <ion-badge style=\\\"width: 100%;\\\" color=\\\"danger\\\">\\n                Tienes campos sin completar:\\n                <p *ngFor=\\\"let field of missingFields\\\">\\n                    {{field}}\\n                </p>\\n            </ion-badge>\\n        </ion-item>\\n        <ion-item *ngFor=\\\"let field of disccountFields\\\">\\n            <ion-label>{{field.label}}</ion-label>\\n            <ng-container [ngSwitch]=\\\"true\\\">\\n                <ng-container *ngSwitchCase=\\\"field.type === 'date'\\\">\\n                    <ion-datetime [name]=\\\"field.fieldName\\\" [required]=\\\"field.required\\\" [(ngModel)]=\\\"disccount[field.fieldName]\\\"></ion-datetime>\\n                </ng-container>\\n                <ng-container *ngSwitchCase=\\\"field.type === 'number' || field.type === 'text'\\\">\\n                    <ion-input [disabled]=\\\"field.fieldName === 'cabin_name'\\\" [type]=\\\"field.type\\\" [(ngModel)]=\\\"disccount[field.fieldName]\\\"></ion-input>\\n                </ng-container>\\n            </ng-container>\\n        </ion-item>\\n        <ion-text>\\n            <ion-icon [style.color]=\\\"status && status[disccount?.status] ? status[disccount?.status]?.color:''\\\" [name]=\\\"status && status[disccount?.status] ? status[disccount?.status]?.icon:''\\\">\\n            </ion-icon>\\n            &nbsp;{{disccount.status}}\\n        </ion-text>\\n    </ion-list>\\n</ion-content>\";"],"sourceRoot":"webpack:///"}