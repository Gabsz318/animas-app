(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"tx+c":function(o,n,t){"use strict";t.r(n),t.d(n,"BookingsPageModule",function(){return g});var i=t("ofXK"),e=t("3Pt+"),a=t("TEn/"),b=t("tyNb"),c=t("mrSG"),r=t("fXoL"),s=t("I/3d"),l=t("UbJi");function d(o,n){if(1&o){const o=r.Sb();r.Rb(0,"ion-item",16),r.Zb("click",function(){r.hc(o);const t=n.$implicit;return r.bc().editBooking(t.id)}),r.Rb(1,"ion-label"),r.mc(2),r.Nb(3,"br"),r.mc(4),r.Nb(5,"br"),r.mc(6),r.Nb(7,"br"),r.Qb(),r.Qb()}if(2&o){const o=n.$implicit;r.Cb(2),r.oc(" ",o.clientName," "),r.Cb(2),r.pc(" ",o.formattedStartDate," - ",o.formattedEndDate," "),r.Cb(2),r.oc(" Caba\xf1a ",o.cabinName," ")}}const u=[{path:"",component:(()=>{class o{constructor(o,n,t){this.ngFirestore=o,this.angularFireAuth=n,this.router=t}ngOnInit(){return Object(c.b)(this,void 0,void 0,function*(){let o,n;this.ngFirestore.collection("cabins").snapshotChanges().subscribe(o=>n=o.map(o=>Object.assign({id:o.payload.doc.id},o.payload.doc.data()))),this.ngFirestore.collection("clients").snapshotChanges().subscribe(n=>o=n.map(o=>Object.assign({id:o.payload.doc.id},o.payload.doc.data()))),this.ngFirestore.collection("bookings").snapshotChanges().subscribe(t=>{console.log(n,o),this.bookings=t.map(t=>Object.assign({id:t.payload.doc.id,cabinName:n.find(o=>o.$key===t.payload.doc.data().cabin_id),clientName:o.find(o=>o.$key===t.payload.doc.data().client_id),formattedStartDate:new Date(t.payload.doc.data().start_date).toLocaleDateString(),formattedEndDate:new Date(t.payload.doc.data().end_date).toLocaleDateString()},t.payload.doc.data()))})})}addBooking(){this.router.navigate(["bookings/booking-form"])}logout(){return Object(c.b)(this,void 0,void 0,function*(){yield this.angularFireAuth.signOut(),this.router.navigate(["login"])})}editBooking(o){this.router.navigate([`bookings/booking-form/${o}`])}}return o.\u0275fac=function(n){return new(n||o)(r.Mb(s.a),r.Mb(l.a),r.Mb(b.g))},o.\u0275cmp=r.Gb({type:o,selectors:[["app-bookings"]],decls:35,vars:1,consts:[[1,"custom-background"],[3,"click",4,"ngFor","ngForOf"],["horizontal","end","vertical","bottom","slot","fixed"],["color","tertiary",3,"click"],["name","add"],["slot","bottom"],["href","home-admin"],["name","home-outline"],["href","cabins"],["name","cabin"],["href","bookings"],["name","ticket-outline"],["href","clients"],["name","people-outline"],["href","disccounts"],["name","disccount"],[3,"click"],["name","log-out-outline"]],template:function(o,n){1&o&&(r.Rb(0,"ion-header"),r.Rb(1,"ion-toolbar",0),r.Rb(2,"ion-title"),r.mc(3,"Reservas"),r.Qb(),r.Qb(),r.Qb(),r.Rb(4,"ion-content"),r.Rb(5,"ion-list"),r.lc(6,d,8,4,"ion-item",1),r.Qb(),r.Rb(7,"ion-fab",2),r.Rb(8,"ion-fab-button",3),r.Zb("click",function(){return n.addBooking()}),r.Nb(9,"ion-icon",4),r.Qb(),r.Qb(),r.Qb(),r.Rb(10,"ion-tab-bar",5),r.Rb(11,"ion-tab-button",6),r.Rb(12,"ion-label"),r.mc(13,"Inicio"),r.Qb(),r.Nb(14,"ion-icon",7),r.Qb(),r.Rb(15,"ion-tab-button",8),r.Rb(16,"ion-label"),r.mc(17,"Caba\xf1as"),r.Qb(),r.Nb(18,"ion-icon",9),r.Qb(),r.Rb(19,"ion-tab-button",10),r.Rb(20,"ion-label"),r.mc(21,"Reservas"),r.Qb(),r.Nb(22,"ion-icon",11),r.Qb(),r.Rb(23,"ion-tab-button",12),r.Rb(24,"ion-label"),r.mc(25,"Clientes"),r.Qb(),r.Nb(26,"ion-icon",13),r.Qb(),r.Rb(27,"ion-tab-button",14),r.Rb(28,"ion-label"),r.mc(29,"Promos"),r.Qb(),r.Nb(30,"ion-icon",15),r.Qb(),r.Rb(31,"ion-tab-button",16),r.Zb("click",function(){return n.logout()}),r.Rb(32,"ion-label"),r.mc(33,"Salir"),r.Qb(),r.Nb(34,"ion-icon",17),r.Qb(),r.Qb()),2&o&&(r.Cb(6),r.ec("ngForOf",n.bookings))},directives:[a.r,a.I,a.H,a.m,a.x,i.i,a.o,a.p,a.s,a.D,a.E,a.w,a.v],styles:[""]}),o})()},{path:"booking-form",loadChildren:()=>Promise.all([t.e(0),t.e(12)]).then(t.bind(null,"VItk")).then(o=>o.BookingFormPageModule)}];let m=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=r.Kb({type:o}),o.\u0275inj=r.Jb({imports:[[b.i.forChild(u)],b.i]}),o})(),g=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=r.Kb({type:o}),o.\u0275inj=r.Jb({imports:[[i.c,e.a,a.J,m]]}),o})()}}]);