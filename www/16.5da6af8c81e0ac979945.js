(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{NfKZ:function(t,n,c){"use strict";c.r(n),c.d(n,"DisccountFormPageModule",function(){return w});var i=c("ofXK"),e=c("3Pt+"),o=c("TEn/"),s=c("tyNb");const a=[{fieldName:"percentage",label:"Prcentaje",required:!0,type:"number"},{fieldName:"start_date",label:"Fecha inicio",required:!0,type:"date"},{fieldName:"end_date",label:"Fecha final",required:!0,type:"date"}];var l=c("fXoL"),u=c("I/3d");function d(t,n){if(1&t){const t=l.Sb();l.Rb(0,"ion-fab",8),l.Zb("click",function(){return l.hc(t),l.bc().delete()}),l.Rb(1,"ion-fab-button",9),l.Nb(2,"ion-icon",10),l.Qb(),l.Qb()}}function r(t,n){if(1&t&&(l.Rb(0,"p"),l.mc(1),l.Qb()),2&t){const t=n.$implicit;l.Cb(1),l.oc(" ",t," ")}}function b(t,n){if(1&t&&(l.Rb(0,"ion-item"),l.Rb(1,"ion-badge",11),l.mc(2," Tienes campos sin completar: "),l.lc(3,r,2,1,"p",6),l.Qb(),l.Qb()),2&t){const t=l.bc();l.Cb(3),l.ec("ngForOf",t.missingFields)}}function f(t,n){if(1&t){const t=l.Sb();l.Pb(0),l.Rb(1,"ion-datetime",14),l.Zb("ngModelChange",function(n){l.hc(t);const c=l.bc().$implicit;return l.bc().disccount[c.fieldName]=n}),l.Qb(),l.Ob()}if(2&t){const t=l.bc().$implicit,n=l.bc();l.Cb(1),l.ec("name",t.fieldName)("required",t.required)("ngModel",n.disccount[t.fieldName])}}function m(t,n){if(1&t){const t=l.Sb();l.Pb(0),l.Rb(1,"ion-input",15),l.Zb("ngModelChange",function(n){l.hc(t);const c=l.bc().$implicit;return l.bc().disccount[c.fieldName]=n}),l.Qb(),l.Ob()}if(2&t){const t=l.bc().$implicit,n=l.bc();l.Cb(1),l.ec("disabled","cabin_name"===t.fieldName)("type",t.type)("ngModel",n.disccount[t.fieldName])}}function h(t,n){if(1&t&&(l.Rb(0,"ion-item"),l.Rb(1,"ion-label"),l.mc(2),l.Qb(),l.Pb(3,12),l.lc(4,f,2,3,"ng-container",13),l.lc(5,m,2,3,"ng-container",13),l.Ob(),l.Qb()),2&t){const t=n.$implicit;l.Cb(2),l.nc(t.label),l.Cb(1),l.ec("ngSwitch",!0),l.Cb(1),l.ec("ngSwitchCase","date"===t.type),l.Cb(1),l.ec("ngSwitchCase","number"===t.type||"text"===t.type)}}let g=(()=>{class t{constructor(t,n,c){this.ngFirestore=t,this.route=n,this.router=c,this.disccountFields=a,this.disccount={percentage:0,start_date:new Date,end_date:new Date,status:"Disponible"},this.status={Activa:{icon:"checkmark-circle",color:"green"},Caducada:{icon:"lock-closed",color:"red"}}}ngOnInit(){this.disccountId=this.route.snapshot.params.disccountId,this.disccountId&&this.ngFirestore.collection("disccounts").doc(this.disccountId).valueChanges().subscribe(t=>this.disccount=t)}save(){this.disccountId?this.ngFirestore.collection("disccounts").doc(this.disccountId).update(this.disccount).then(()=>{this.router.navigate(["disccounts"])}).catch(t=>console.log(t)):(this.ngFirestore.collection("disccounts").add(this.disccount),this.router.navigate(["disccounts"]))}delete(){this.ngFirestore.doc("disccounts/"+this.disccountId).delete(),this.router.navigate(["disccounts"])}}return t.\u0275fac=function(n){return new(n||t)(l.Mb(u.a),l.Mb(s.a),l.Mb(s.g))},t.\u0275cmp=l.Gb({type:t,selectors:[["app-disccount-form"]],decls:15,vars:8,consts:[[1,"custom-background"],["vertical","bottom","horizontal","start","slot","fixed",3,"click",4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed",3,"click"],["color","tertiary"],["name","checkmark-done-outline",1,"white"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"name"],["vertical","bottom","horizontal","start","slot","fixed",3,"click"],["color","danger"],["name","trash",1,"danger"],["color","danger",2,"width","100%"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"name","required","ngModel","ngModelChange"],[3,"disabled","type","ngModel","ngModelChange"]],template:function(t,n){1&t&&(l.Rb(0,"ion-header"),l.Rb(1,"ion-toolbar",0),l.Rb(2,"ion-title"),l.mc(3),l.Qb(),l.Qb(),l.Qb(),l.Rb(4,"ion-content"),l.lc(5,d,3,0,"ion-fab",1),l.Rb(6,"ion-fab",2),l.Zb("click",function(){return n.save()}),l.Rb(7,"ion-fab-button",3),l.Nb(8,"ion-icon",4),l.Qb(),l.Qb(),l.Rb(9,"ion-list"),l.lc(10,b,4,1,"ion-item",5),l.lc(11,h,6,4,"ion-item",6),l.Rb(12,"ion-text"),l.Nb(13,"ion-icon",7),l.mc(14),l.Qb(),l.Qb(),l.Qb()),2&t&&(l.Cb(3),l.oc("",n.disccountId?"Editar ":"Crear ","Promoci\xf3n {{disccount?.percentage ? disccount?.percentage+ '%': ''}"),l.Cb(2),l.ec("ngIf",n.disccountId),l.Cb(5),l.ec("ngIf",n.missingFields),l.Cb(1),l.ec("ngForOf",n.disccountFields),l.Cb(2),l.kc("color",n.status&&n.status[null==n.disccount?null:n.disccount.status]?null==n.status[null==n.disccount?null:n.disccount.status]?null:n.status[null==n.disccount?null:n.disccount.status].color:""),l.ec("name",n.status&&n.status[null==n.disccount?null:n.disccount.status]?null==n.status[null==n.disccount?null:n.disccount.status]?null:n.status[null==n.disccount?null:n.disccount.status].icon:""),l.Cb(1),l.oc(" \xa0",n.disccount.status," "))},directives:[o.o,o.F,o.E,o.j,i.j,o.l,o.m,o.p,o.u,i.i,o.C,o.s,o.b,o.t,i.k,i.l,o.k,o.J,e.f,e.d,e.e,o.r,o.K],styles:[""]}),t})();const p=[{path:"",component:g},{path:":disccountId",component:g}];let C=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=l.Kb({type:t}),t.\u0275inj=l.Jb({imports:[[s.i.forChild(p)],s.i]}),t})(),w=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=l.Kb({type:t}),t.\u0275inj=l.Jb({imports:[[i.c,e.a,o.G,C]]}),t})()}}]);