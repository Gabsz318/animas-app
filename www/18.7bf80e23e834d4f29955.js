(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{NfKZ:function(t,n,c){"use strict";c.r(n),c.d(n,"DisccountFormPageModule",function(){return w});var i=c("ofXK"),e=c("3Pt+"),o=c("TEn/"),s=c("tyNb");const a=[{fieldName:"percentage",label:"Prcentaje",required:!0,type:"number"},{fieldName:"start_date",label:"Fecha inicio",required:!0,type:"date"},{fieldName:"end_date",label:"Fecha final",required:!0,type:"date"}];var u=c("fXoL"),l=c("I/3d");function d(t,n){if(1&t){const t=u.Sb();u.Rb(0,"ion-fab",9),u.Zb("click",function(){return u.hc(t),u.bc().delete()}),u.Rb(1,"ion-fab-button",10),u.Nb(2,"ion-icon",11),u.Qb(),u.Qb()}}function r(t,n){if(1&t&&(u.Rb(0,"p"),u.mc(1),u.Qb()),2&t){const t=n.$implicit;u.Cb(1),u.oc(" ",t," ")}}function b(t,n){if(1&t&&(u.Rb(0,"ion-item"),u.Rb(1,"ion-badge",12),u.mc(2," Tienes campos sin completar: "),u.lc(3,r,2,1,"p",7),u.Qb(),u.Qb()),2&t){const t=u.bc();u.Cb(3),u.ec("ngForOf",t.missingFields)}}function f(t,n){if(1&t){const t=u.Sb();u.Pb(0),u.Rb(1,"ion-datetime",15),u.Zb("ngModelChange",function(n){u.hc(t);const c=u.bc().$implicit;return u.bc().disccount[c.fieldName]=n}),u.Qb(),u.Ob()}if(2&t){const t=u.bc().$implicit,n=u.bc();u.Cb(1),u.ec("name",t.fieldName)("required",t.required)("ngModel",n.disccount[t.fieldName])}}function m(t,n){if(1&t){const t=u.Sb();u.Pb(0),u.Rb(1,"ion-input",16),u.Zb("ngModelChange",function(n){u.hc(t);const c=u.bc().$implicit;return u.bc().disccount[c.fieldName]=n}),u.Qb(),u.Ob()}if(2&t){const t=u.bc().$implicit,n=u.bc();u.Cb(1),u.ec("disabled","cabin_name"===t.fieldName)("type",t.type)("ngModel",n.disccount[t.fieldName])}}function h(t,n){if(1&t&&(u.Rb(0,"ion-item"),u.Rb(1,"ion-label"),u.mc(2),u.Qb(),u.Pb(3,13),u.lc(4,f,2,3,"ng-container",14),u.lc(5,m,2,3,"ng-container",14),u.Ob(),u.Qb()),2&t){const t=n.$implicit;u.Cb(2),u.nc(t.label),u.Cb(1),u.ec("ngSwitch",!0),u.Cb(1),u.ec("ngSwitchCase","date"===t.type),u.Cb(1),u.ec("ngSwitchCase","number"===t.type||"text"===t.type)}}let g=(()=>{class t{constructor(t,n,c){this.ngFirestore=t,this.route=n,this.router=c,this.disccountFields=a,this.disccount={percentage:0,start_date:new Date,end_date:new Date,status:"Disponible"},this.status={Activa:{icon:"checkmark-circle",color:"green"},Caducada:{icon:"lock-closed",color:"red"}}}ngOnInit(){this.disccountId=this.route.snapshot.params.disccountId,this.disccountId&&this.ngFirestore.collection("disccounts").doc(this.disccountId).valueChanges().subscribe(t=>this.disccount=t)}save(){this.disccountId?this.ngFirestore.collection("disccounts").doc(this.disccountId).update(this.disccount).then(()=>{this.router.navigate(["disccounts"])}).catch(t=>console.log(t)):(this.ngFirestore.collection("disccounts").add(this.disccount),this.router.navigate(["disccounts"]))}delete(){this.ngFirestore.doc("disccounts/"+this.disccountId).delete(),this.router.navigate(["disccounts"])}}return t.\u0275fac=function(n){return new(n||t)(u.Mb(l.a),u.Mb(s.a),u.Mb(s.g))},t.\u0275cmp=u.Gb({type:t,selectors:[["app-disccount-form"]],decls:17,vars:8,consts:[[1,"custom-background"],["slot","start"],["vertical","bottom","horizontal","start","slot","fixed",3,"click",4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed",3,"click"],["color","tertiary"],["name","checkmark-done-outline",1,"white"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"name"],["vertical","bottom","horizontal","start","slot","fixed",3,"click"],["color","danger"],["name","trash",1,"danger"],["color","danger",2,"width","100%"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"name","required","ngModel","ngModelChange"],[3,"disabled","type","ngModel","ngModelChange"]],template:function(t,n){1&t&&(u.Rb(0,"ion-header"),u.Rb(1,"ion-toolbar",0),u.Rb(2,"ion-buttons",1),u.Nb(3,"ion-back-button"),u.Qb(),u.Rb(4,"ion-title"),u.mc(5),u.Qb(),u.Qb(),u.Qb(),u.Rb(6,"ion-content"),u.lc(7,d,3,0,"ion-fab",2),u.Rb(8,"ion-fab",3),u.Zb("click",function(){return n.save()}),u.Rb(9,"ion-fab-button",4),u.Nb(10,"ion-icon",5),u.Qb(),u.Qb(),u.Rb(11,"ion-list"),u.lc(12,b,4,1,"ion-item",6),u.lc(13,h,6,4,"ion-item",7),u.Rb(14,"ion-text"),u.Nb(15,"ion-icon",8),u.mc(16),u.Qb(),u.Qb(),u.Qb()),2&t&&(u.Cb(5),u.oc("",n.disccountId?"Editar ":"Crear ","Promoci\xf3n {{disccount?.percentage ? disccount?.percentage+ '%': ''}"),u.Cb(2),u.ec("ngIf",n.disccountId),u.Cb(5),u.ec("ngIf",n.missingFields),u.Cb(1),u.ec("ngForOf",n.disccountFields),u.Cb(2),u.kc("color",n.status&&n.status[null==n.disccount?null:n.disccount.status]?null==n.status[null==n.disccount?null:n.disccount.status]?null:n.status[null==n.disccount?null:n.disccount.status].color:""),u.ec("name",n.status&&n.status[null==n.disccount?null:n.disccount.status]?null==n.status[null==n.disccount?null:n.disccount.status]?null:n.status[null==n.disccount?null:n.disccount.status].icon:""),u.Cb(1),u.oc(" \xa0",n.disccount.status," "))},directives:[o.r,o.I,o.f,o.b,o.c,o.H,o.m,i.j,o.o,o.p,o.s,o.x,i.i,o.F,o.v,o.d,o.w,i.k,i.l,o.n,o.M,e.f,e.d,e.e,o.u,o.N],styles:[""]}),t})();const p=[{path:"",component:g},{path:":disccountId",component:g}];let C=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=u.Kb({type:t}),t.\u0275inj=u.Jb({imports:[[s.i.forChild(p)],s.i]}),t})(),w=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=u.Kb({type:t}),t.\u0275inj=u.Jb({imports:[[i.c,e.a,o.J,C]]}),t})()}}]);